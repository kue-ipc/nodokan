<%== "\u{feff}" -%>
<%- require 'csv' -%>
<%= %w[
  id
  name
  network_category
  vlan
  ip_network[address]
  ip_network[gateway]
  ip_pools[static][first]
  ip_pools[static][last]
  ip_pools[dynamic][first]
  ip_pools[dynamic][last]
  ip_pools[reserved][first]
  ip_pools[reserved][last]
].join(',') %>
<%- @subnetworks.each do |subnetwork| -%>
<%==
[
  subnetwork.id,
  subnetwork.name,
  subnetwork.network_category.name,
  subnetwork.vlan,
  subnetwork.ip_networks.first&.address,
  subnetwork.ip_networks.first&.gateway,
  subnetwork.ip_networks.first&.ip_pools&.find(&:static?)&.first,
  subnetwork.ip_networks.first&.ip_pools&.find(&:static?)&.last,
  subnetwork.ip_networks.first&.ip_pools&.find(&:dynamic?)&.first,
  subnetwork.ip_networks.first&.ip_pools&.find(&:dynamic?)&.last,
  subnetwork.ip_networks.first&.ip_pools&.find(&:reserved?)&.first,
  subnetwork.ip_networks.first&.ip_pools&.find(&:reserved?)&.last,
].to_csv
-%>
<%- end -%>
