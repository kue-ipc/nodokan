<%== "\u{feff}" -%>
<%- require 'csv' -%>
<%= %w[
id
user[username]
name
hostname
domain
place[area]
place[building]
place[floor]
place[room]
hardware[device_type]
hardware[maker]
hardware[product_name]
hardware[model_number]
operating_system[os_category]
operating_system[name]
nic[interface_type]
nic[name]
nic[mac_address]
nic[network][vlan]
nic[ip_config]
nic[ip_address]
note
].join(',') %>
<%- @nodes.each do |node| -%>
<%==
[
  node.id,
  node.user.username,
  node.name,
  node.hostname,
  node.domain,
  node.place&.area,
  node.place&.building,
  node.place&.floor,
  node.place&.room,
  node.hardware&.device_type,
  node.hardware&.maker,
  node.hardware&.product_name,
  node.hardware&.model_number,
  node.operating_system&.os_category,
  node.operating_system&.name,
  node.nics.first&.interface_type,
  node.nics.first&.name,
  node.nics.first&.mac_address,
  node.nics.first&.network&.vlan,
  node.nics.first&.ip_config,
  node.nics.first&.ip_address,
  node.note
].to_csv
-%>
<%- end -%>
