<%== "\u{feff}" -%>
<%- require 'csv' -%>
<%= %w[
id
user
name
hostname
domain
place[area]
place[building]
place[floor]
place[room]
hardware[category]
hardware[maker]
hardware[product_name]
hardware[model_number]
operating_system[category]
operating_system[name]
security_software[name]
network[interface_type]
network[name]
network[mac_address]
network[vlan]
network[config]
network[address]
note
].join(',') %>
<%- @nodes.each do |node| -%>
<%==
[
  node.id,
  node.user.username,
  node.name,
  node.hostname,
  node.domain,
  node.place.area,
  node.place.building,
  node.place.floor,
  node.place.room,
  node.hardware.category,
  node.hardware.maker,
  node.hardware.product_name,
  node.hardware.model_number,
  node.operating_system.category,
  node.operating_system.name,
  node.security_software.name,
  node.network_interfaces.first.interface_type,
  node.network_interfaces.first.name,
  node.network_interfaces.first.mac_address,
  node.network_interfaces.first.network_connections.first.subnetwork.vlan,
  node.network_interfaces.first.network_connections.first.ip_addresses.first.config,
  node.network_interfaces.first.network_connections.first.ip_addresses.first.address,
  node.note
].to_csv
-%>
<%- end -%>
