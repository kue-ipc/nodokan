<%== "\u{feff}" -%>
<%- require 'csv' -%>
<%= %w[
  id
  name
  vlan
  dhcp
  auth
  closed
  ip_network
  ip_gateway
  ip_pools[static]
  ip_pools[dynamic]
  ip_pools[reserved]
  note
].join(',') %>
<%- @networks.each do |network| -%>
<%==
[
  network.id,
  network.name,
  network.vlan,
  network.dhcp,
  network.auth,
  network.closed,
  network.ip_network,
  network.ip_gateway,
  network.ip_pools.select(&:ip_static?).map { |pl| pool_range(pl) }.join('|'),
  network.ip_pools.select(&:ip_dynamic?).map { |pl| pool_range(pl) }.join('|'),
  network.ip_pools.select(&:ip_reserved?).map { |pl| pool_range(pl) }.join('|'),
  network.note
].to_csv
-%>
<%- end -%>
