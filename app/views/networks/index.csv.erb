<%== "\u{feff}" -%>
<%- require 'csv' -%>
<%= %w[
  id
  name
  vlan
  dhcp
  auth
  closed
  ipv4_network
  ipv4_gateway
  ipv4_pools[static]
  ipv4_pools[dynamic]
  ipv4_pools[reserved]
  note
].join(',') %>
<%- @networks.each do |network| -%>
<%==
[
  network.id,
  network.name,
  network.vlan,
  network.dhcp,
  network.auth,
  network.closed,
  network.ipv4_network,
  network.ipv4_gateway,
  network.ipv4_pools.select(&:ipv4_static?).map { |pl| pool_range(pl) }.join('|'),
  network.ipv4_pools.select(&:ipv4_dynamic?).map { |pl| pool_range(pl) }.join('|'),
  network.ipv4_pools.select(&:ipv4_reserved?).map { |pl| pool_range(pl) }.join('|'),
  network.note
].to_csv
-%>
<%- end -%>
